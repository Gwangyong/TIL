# 2025.06.05(목) - 2025.06.05(목) - enumerated 왜 제네릭 T에서는 안되는걸까
> **Status**: 🎯 **블로그 발행**<br>**Blog**: [enumerated()가 제네릭에서 안 된다고?](https://jud00.tistory.com/entry/0605%EB%AA%A9-enumerated%EA%B0%80-%EC%8B%A4%ED%96%89%EC%9D%B4-%EC%95%88%EB%90%98%EA%B8%B8%EB%A0%88-%EA%B3%B5%EB%B6%80)

## **💡** enumerated()가 안되네..?

이번 주 개인 과제를 구현하는 도중, 방금 전에도 잘 사용하던 `enumerated()`가 갑자기 동작하지 않았다.

뭐가 문제일까 하고 전에 쓴 코드와 비교하는 도중, `Array<Int>`나 `Array<String>` 에서는 잘 되던 코드가 **제네릭 타입 T로 바꾸자마자 자동완성이 작동하지 않는 것**을 확인했다.

<img width="302" height="95" alt="Image" src="https://github.com/user-attachments/assets/eff5dd64-384b-400a-bf39-e2171473c507" />

### **🔍 이유는 제네릭 T에는 Sequence 제약이 없기 때문!**

---

평소에 그냥 사용만해서 잘 몰랐지만, `enumerated()`는 단순히 아무 타입에서나 다 사용 가능한 메서드가 아니였다.

Swift에서는 **`Sequence` 프로토콜을 채택한 타입에서만** 사용할 수 있다고 한다.

제네릭 T는 **타입이 아직 확정되지 않아** `Sequence`**임이 보장되지 않는다.** 따라서 `enumerated()`를 사용하려면 **“T는 Sequence를 따르는 타입이야”** 라고 명시해 줘야한다.

아래처럼 `<T: Sequence>` 처럼 제약을 명시해주면, 아래 이미지처럼 다시 사용 가능해지는걸 확인할 수 있다.

<img width="302" height="95" alt="Image" src="https://github.com/user-attachments/assets/0bfabd5f-7213-40ec-82f2-71fea15db9ac" />

### **🧠** enumerated()란?

---

`enumerated()` 는 배열이나 문자열 등에서 `(offset, element)` 형태로 튜플을 반환해주는 메서드다.

```swift
let arr = ["a", "b", "c"]

for (i, value) in arr.enumerated() {
	print("\(i): \(value)")
}
// 0: a
// 1: b
// 2: c
```

여기서 `offset`은 `index`와 같은 의미고, `element`는 실제 값이다.

이 메서드는 주로 반복 중 인덱스 정보가 필요한 경우에 매우 유용하게 사용된다.

### **📚** Sequence란?

---

Sequence는 Swift 표준 라이브러리에 정의된 프로토콜로, **“차례대로 반복 가능한 컬렉션”**을 추상적인 개념이라고 한다.

```swift
protocol Sequence {
	associatedtype Element
	func makeIterator() -> Iterator
}
```

- `associatedtype Element`: 시퀀스 안에 들어 있는 요소의 타입
- `makeIterator()`: 반복자(Iterator)를 생성하는 메서드

이 프로토콜을 채택하면 for-in, map, filter, enumerated() 같은 반복 기능을 사용할 수 있다.

대표적인 Sequence 채택 타입들로는 Array, Dictionary, Set, Range, String등이 있다.

### **🤔** 음.. 그럼 Iterator은 또 뭘까..?

---

`Sequence`가 `makeIterator()`를 통해 생성하는 객체가 바로 `Iterator`이고, 이 객체는 `IteratorProtocol`을 따른다.

```swift
protocol IteratorProtocol {
    associatedtype Element
    mutating func next() -> Element?
}
```

- `next()`를 호출할 때마다 하나씩 다음 요소를 꺼내서 반환함
- 더 이상 없으면 `nil`을 반환한다.

```swift
let arr = [1, 2, 3]  // Sequence

var iter = arr.makeIterator()  // Iterator 생성

print(iter.next())  // Optional(1)
print(iter.next())  // Optional(2)
print(iter.next())  // Optional(3)
print(iter.next())  // nil
```

| 개념 | 역할 |
| --- | --- |
| Sequence | 반복 가능한 구조 제공 (makeIterator() 메서드로 반복자 생성) |
| Iterator | 실제 반복을 실행하는 객체(next() 메서드로 하나씩 꺼냄) |
| enumerated() | Sequence를 채택한 타입에서 (offset, element) 튜플을 반환하는 반복 메서드 |